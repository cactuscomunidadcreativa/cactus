<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeekFlow - Team Check-ins</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/weekflow/styles.css">
</head>
<body class="weekflow-app">
    <div class="app" id="app">
        <!-- Login Screen -->
        <div class="screen login-screen" id="loginScreen">
            <div class="login-container">
                <div class="login-header">
                    <span class="logo">ğŸŒŠ</span>
                    <h1>WeekFlow</h1>
                    <p data-i18n="login.subtitle">Team check-ins made simple</p>
                </div>

                <div class="login-form">
                    <div class="form-group">
                        <label data-i18n="login.teamCode">Team Code</label>
                        <input type="text" id="teamCode" placeholder="Enter team code..." class="input">
                    </div>
                    <div class="form-group">
                        <label data-i18n="login.yourName">Your Name</label>
                        <input type="text" id="userName" placeholder="Your name..." class="input">
                    </div>
                    <button class="btn btn-primary btn-block" onclick="joinTeam()">
                        <span data-i18n="login.join">Join Team</span>
                        <span class="btn-icon">â†’</span>
                    </button>

                    <div class="divider">
                        <span data-i18n="login.or">or</span>
                    </div>

                    <button class="btn btn-outline btn-block" onclick="showCreateTeam()">
                        <span data-i18n="login.createTeam">Create New Team</span>
                    </button>
                </div>

                <div class="lang-switcher">
                    <button class="lang-btn active" data-lang="en">EN</button>
                    <button class="lang-btn" data-lang="es">ES</button>
                    <button class="lang-btn" data-lang="pt">PT</button>
                    <button class="lang-btn" data-lang="it">IT</button>
                    <button class="lang-btn" data-lang="ja">æ—¥æœ¬èª</button>
                    <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
                    <button class="lang-btn" data-lang="ko">í•œêµ­ì–´</button>
                    <button class="lang-btn" data-lang="ar">Ø¹Ø±Ø¨ÙŠ</button>
                </div>
            </div>
        </div>

        <!-- Create Team Modal -->
        <div class="modal hidden" id="createTeamModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="createTeam.title">Create New Team</h3>
                    <button class="btn-close" onclick="closeModal('createTeamModal')">Ã—</button>
                </div>
                <div class="form-group">
                    <label data-i18n="createTeam.teamName">Team Name</label>
                    <input type="text" id="newTeamName" class="input" placeholder="My Awesome Team">
                </div>
                <div class="form-group">
                    <label data-i18n="createTeam.yourName">Your Name (Admin)</label>
                    <input type="text" id="adminName" class="input" placeholder="Your name">
                </div>
                <button class="btn btn-primary btn-block" onclick="createTeam()" data-i18n="createTeam.create">Create Team</button>
            </div>
        </div>

        <!-- Main App Screen -->
        <div class="screen main-screen hidden" id="mainScreen">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <span class="logo-sm">ğŸŒŠ</span>
                    <div class="team-info">
                        <h2 id="teamNameDisplay">Six Seconds Team</h2>
                        <span class="week-label" id="weekLabel">Week of Jan 27</span>
                    </div>
                </div>
                <div class="header-right">
                    <select id="headerLangSelect" class="lang-select" onchange="changeLanguage(this.value)">
                        <option value="en">ğŸ‡ºğŸ‡¸ EN</option>
                        <option value="es">ğŸ‡ªğŸ‡¸ ES</option>
                        <option value="pt">ğŸ‡§ğŸ‡· PT</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ IT</option>
                        <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                        <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                        <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                        <option value="ar">ğŸ‡¸ğŸ‡¦ Ø¹Ø±Ø¨ÙŠ</option>
                    </select>
                    <button class="btn btn-presenter hidden" id="presenterBtn" onclick="togglePresenterMode()">
                        <span>ğŸ“º</span>
                        <span data-i18n="actions.present">Present</span>
                    </button>
                    <div class="user-mood" id="userMood" onclick="openMoodPicker()">
                        <span class="mood-emoji" id="currentMood">ğŸ˜Š</span>
                    </div>
                    <div class="user-info">
                        <span class="user-name" id="userNameDisplay">Josh</span>
                        <span class="admin-badge hidden" id="adminBadge">ğŸ‘‘</span>
                    </div>
                    <button class="btn-icon-only" onclick="openSettings()">âš™ï¸</button>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content" id="mainContent">
                <!-- Team Sections (Show & Tell, To Discuss, Focus) -->
                <div class="team-sections">
                    <div class="section-card" data-section="showAndTell">
                        <div class="section-header">
                            <span class="section-icon">ğŸ“¢</span>
                            <h3 data-i18n="sections.showAndTell">Show & Tell</h3>
                            <button class="btn-add" onclick="addItem('showAndTell')">+</button>
                        </div>
                        <div class="section-items" id="showAndTellItems"></div>
                    </div>

                    <div class="section-card" data-section="toDiscuss">
                        <div class="section-header">
                            <span class="section-icon">ğŸ’¬</span>
                            <h3 data-i18n="sections.toDiscuss">To Discuss</h3>
                            <button class="btn-add" onclick="addItem('toDiscuss')">+</button>
                        </div>
                        <div class="section-items" id="toDiscussItems"></div>
                    </div>

                    <div class="section-card" data-section="focus">
                        <div class="section-header">
                            <span class="section-icon">ğŸ¯</span>
                            <h3 data-i18n="sections.focus">Focus</h3>
                            <button class="btn-add" onclick="addItem('focus')">+</button>
                        </div>
                        <div class="section-items" id="focusItems"></div>
                    </div>
                </div>

                <!-- Team Members -->
                <div class="team-members-section">
                    <div class="section-header-row">
                        <h3 data-i18n="sections.team">Team</h3>
                        <div class="team-pulse" id="teamPulse">
                            <span class="pulse-label" data-i18n="pulse.team">Team Pulse:</span>
                            <span class="pulse-value" id="pulseValue">ğŸ˜Š 4.2</span>
                        </div>
                    </div>
                    <div class="members-grid" id="membersGrid"></div>
                </div>

                <!-- Carryover (Admin only) -->
                <div class="carryover-section hidden" id="carryoverSection">
                    <div class="section-header-row">
                        <h3>
                            <span>âš ï¸</span>
                            <span data-i18n="sections.carryover">Pending from Last Week</span>
                            <span class="count-badge" id="carryoverCount">0</span>
                        </h3>
                    </div>
                    <div class="carryover-items" id="carryoverItems"></div>
                </div>
            </main>

            <!-- My Tasks Panel -->
            <aside class="tasks-panel" id="tasksPanel">
                <div class="panel-header">
                    <h3 data-i18n="tasks.myTasks">My Tasks</h3>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                        <span class="progress-text" id="progressText">0/0</span>
                    </div>
                </div>

                <div class="tasks-list" id="tasksList"></div>

                <div class="add-task">
                    <input type="text" id="newTaskInput" placeholder="Add a task..." class="input" onkeypress="handleTaskKeypress(event)">
                    <div class="task-options">
                        <select id="taskPriority" class="select-sm">
                            <option value="normal">âšª Tranqui</option>
                            <option value="important">ğŸŸ¡ Ojo</option>
                            <option value="urgent">ğŸ”¥ Fuego!</option>
                        </select>
                        <input type="date" id="taskDueDate" class="input-date">
                        <button class="btn btn-primary btn-sm" onclick="addTask()">+</button>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Presenter Mode (Admin shares screen) -->
        <div class="screen presenter-screen hidden" id="presenterScreen">
            <header class="presenter-header">
                <div class="presenter-title">
                    <span class="logo-sm">ğŸŒŠ</span>
                    <h1 id="presenterTeamName">WeekFlow</h1>
                    <span class="week-badge" id="presenterWeek">Week of Jan 27</span>
                </div>
                <button class="btn btn-outline" onclick="exitPresenterMode()">
                    <span data-i18n="actions.exit">Exit</span> âœ•
                </button>
            </header>

            <main class="presenter-content">
                <!-- Live sections -->
                <div class="presenter-sections" id="presenterSections">
                    <div class="presenter-section">
                        <div class="presenter-section-header">
                            <span>ğŸ“¢</span>
                            <h2 data-i18n="sections.showAndTell">Show & Tell</h2>
                        </div>
                        <div class="presenter-items" id="presenterShowAndTell"></div>
                    </div>

                    <div class="presenter-section">
                        <div class="presenter-section-header">
                            <span>ğŸ’¬</span>
                            <h2 data-i18n="sections.toDiscuss">To Discuss</h2>
                        </div>
                        <div class="presenter-items" id="presenterToDiscuss"></div>
                    </div>

                    <div class="presenter-section">
                        <div class="presenter-section-header">
                            <span>ğŸ¯</span>
                            <h2 data-i18n="sections.focus">Focus</h2>
                        </div>
                        <div class="presenter-items" id="presenterFocus"></div>
                    </div>
                </div>

                <!-- Team overview -->
                <div class="presenter-team">
                    <div class="presenter-section-header">
                        <span>ğŸ‘¥</span>
                        <h2 data-i18n="sections.team">Team</h2>
                        <div class="team-pulse-large" id="presenterPulse">ğŸ˜Š 4.2</div>
                    </div>
                    <div class="presenter-members" id="presenterMembers"></div>
                </div>
            </main>
        </div>

        <!-- Modals -->
        <!-- Mood Picker with Plutchik Wheel -->
        <div class="modal hidden" id="moodModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="mood.howAreYou">How are you feeling?</h3>
                    <button class="btn-close" onclick="closeModal('moodModal')">Ã—</button>
                </div>
                <!-- Plutchik Wheel Container -->
                <div id="plutchikContainer"></div>
            </div>
        </div>

        <!-- Add Item Modal -->
        <div class="modal hidden" id="addItemModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="addItemTitle">Add Item</h3>
                    <button class="btn-close" onclick="closeModal('addItemModal')">Ã—</button>
                </div>
                <div class="form-group">
                    <textarea id="itemContent" class="input textarea" placeholder="What do you want to share?"></textarea>
                </div>
                <div class="form-group">
                    <label data-i18n="form.mentions">Mention someone (optional)</label>
                    <select id="itemMention" class="select">
                        <option value="">No one</option>
                    </select>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveItem()" data-i18n="actions.add">Add</button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal hidden" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.title">Settings</h3>
                    <button class="btn-close" onclick="closeModal('settingsModal')">Ã—</button>
                </div>
                <div class="settings-list">
                    <div class="setting-item">
                        <label data-i18n="settings.language">Language</label>
                        <select id="settingsLang" class="select" onchange="changeLanguage(this.value)">
                            <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                            <option value="pt">ğŸ‡§ğŸ‡· PortuguÃªs</option>
                            <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
                            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label data-i18n="settings.teamCode">Team Code</label>
                        <div class="code-display">
                            <code id="displayTeamCode">ABC123</code>
                            <button class="btn-copy" onclick="copyTeamCode()">ğŸ“‹</button>
                        </div>
                    </div>
                    <div class="setting-item" id="inviteLinkItem">
                        <label data-i18n="settings.inviteLink">Invite Link</label>
                        <button class="btn btn-sm btn-outline" onclick="copyInviteLink()">
                            <span data-i18n="actions.copy">Copy Link</span> ğŸ”—
                        </button>
                    </div>

                    <!-- Integrations -->
                    <div class="settings-section">
                        <h4 data-i18n="settings.integrations">Integrations</h4>
                    </div>

                    <div class="setting-item">
                        <label>
                            <span class="integration-icon">ğŸ’¬</span>
                            <span data-i18n="settings.slack">Slack Reminders</span>
                        </label>
                        <button class="btn btn-sm btn-outline" id="slackBtn" onclick="openSlackSetup()">
                            <span data-i18n="actions.setup">Setup</span>
                        </button>
                    </div>

                    <div class="setting-item">
                        <label>
                            <span class="integration-icon">ğŸ“„</span>
                            <span data-i18n="settings.googleDocs">Export to Google Docs</span>
                        </label>
                        <button class="btn btn-sm btn-outline" onclick="exportToGoogleDocs()">
                            <span data-i18n="actions.export">Export</span>
                        </button>
                    </div>

                    <div class="setting-item">
                        <label>
                            <span class="integration-icon">ğŸ“§</span>
                            <span data-i18n="settings.emailReminders">Email Reminders</span>
                        </label>
                        <button class="btn btn-sm btn-outline" id="emailBtn" onclick="openEmailSetup()">
                            <span data-i18n="actions.setup">Setup</span>
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline btn-danger" onclick="leaveTeam()" data-i18n="settings.leave">Leave Team</button>
                </div>
            </div>
        </div>
        <!-- Slack Setup Modal -->
        <div class="modal hidden" id="slackModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ’¬ Slack Integration</h3>
                    <button class="btn-close" onclick="closeModal('slackModal')">Ã—</button>
                </div>
                <p class="modal-description" data-i18n="slack.description">
                    Get reminders in Slack before your weekly check-ins.
                </p>
                <div class="form-group">
                    <label data-i18n="slack.webhookUrl">Slack Webhook URL</label>
                    <input type="text" id="slackWebhook" class="input" placeholder="https://hooks.slack.com/services/...">
                    <small class="form-help" data-i18n="slack.webhookHelp">
                        Create an incoming webhook in your Slack workspace settings.
                    </small>
                </div>
                <div class="form-group">
                    <label data-i18n="slack.reminderDay">Reminder Day</label>
                    <select id="slackReminderDay" class="select">
                        <option value="1">Monday morning</option>
                        <option value="5">Friday morning</option>
                        <option value="0">Sunday evening</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="slackSummary" checked>
                        <span data-i18n="slack.sendSummary">Send weekly summary after meeting</span>
                    </label>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveSlackSettings()">
                    <span data-i18n="actions.save">Save</span>
                </button>
            </div>
        </div>

        <!-- Email Setup Modal -->
        <div class="modal hidden" id="emailModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ“§ Email Reminders</h3>
                    <button class="btn-close" onclick="closeModal('emailModal')">Ã—</button>
                </div>
                <p class="modal-description" data-i18n="email.description">
                    Receive email reminders before your weekly check-ins.
                </p>
                <div class="form-group">
                    <label data-i18n="email.addresses">Team Email Addresses</label>
                    <textarea id="emailAddresses" class="input textarea" placeholder="john@example.com&#10;jane@example.com"></textarea>
                    <small class="form-help" data-i18n="email.addressesHelp">
                        One email per line. All team members will receive reminders.
                    </small>
                </div>
                <div class="form-group">
                    <label data-i18n="email.reminderDay">Reminder Day</label>
                    <select id="emailReminderDay" class="select">
                        <option value="1">Monday 9:00 AM</option>
                        <option value="5">Friday 9:00 AM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="emailSummary" checked>
                        <span data-i18n="email.sendSummary">Send weekly summary after meeting</span>
                    </label>
                </div>
                <button class="btn btn-primary btn-block" onclick="saveEmailSettings()">
                    <span data-i18n="actions.save">Save</span>
                </button>
            </div>
        </div>

        <!-- Google Docs Export Modal -->
        <div class="modal hidden" id="googleDocsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ğŸ“„ Export to Google Docs</h3>
                    <button class="btn-close" onclick="closeModal('googleDocsModal')">Ã—</button>
                </div>
                <p class="modal-description">
                    Your weekly summary is ready to be copied to Google Docs.
                </p>
                <div class="export-preview" id="exportPreview">
                    <!-- Preview content -->
                </div>
                <div class="export-actions">
                    <button class="btn btn-outline" onclick="copyExportContent()">
                        ğŸ“‹ <span data-i18n="actions.copyContent">Copy Content</span>
                    </button>
                    <button class="btn btn-primary" onclick="openGoogleDocs()">
                        ğŸ“„ <span data-i18n="actions.openGoogleDocs">Open Google Docs</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/weekflow/i18n.js"></script>
    <script src="/weekflow/plutchik.js"></script>
    <script src="/weekflow/app.js"></script>
</body>
</html>
